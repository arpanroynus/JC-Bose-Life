<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADHD: The Executive Function Spectrum</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Poppins', 'sans-serif'],
                    },
                    colors: {
                        primary: '#4F46E5',   
                        secondary: '#F59E0B', 
                        accent: '#10B981',    
                        danger: '#F43F5E',    
                        dark: '#1E293B',
                        light: '#F8FAFC'
                    }
                }
            }
        }
    </script>
    
    <style>
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            height: 350px;
            max-height: 400px;
        }
        
        @media (max-width: 640px) {
            .chart-container { height: 300px; }
        }

        .card-hover {
            transition: all 0.2s ease-in-out;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1);
        }

        .shimmer {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .btn-interact {
            cursor: pointer;
            transition: transform 0.1s;
        }
        .btn-interact:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body class="bg-light text-slate-800 font-sans leading-relaxed">

    <!-- Header Section -->
    <header class="bg-gradient-to-r from-primary to-purple-600 text-white py-12 px-4 shadow-lg">
        <div class="max-w-6xl mx-auto text-center">
            <h1 class="text-4xl md:text-6xl font-bold mb-4">Inside the ADHD Brain</h1>
            <p class="text-xl md:text-2xl opacity-90 font-light">Navigating Executive Function, Emotions, and Neurochemistry</p>
        </div>
    </header>

    <!-- AI COACH SECTION -->
    <section class="max-w-7xl mx-auto px-4 md:px-8 mt-12">
        <div class="bg-gradient-to-br from-indigo-900 to-primary rounded-3xl p-8 shadow-2xl text-white relative overflow-hidden">
            <div class="relative z-10 grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div>
                    <h2 class="text-3xl font-bold mb-4 flex items-center gap-2">
                        âœ¨ AI Executive Function Coach
                    </h2>
                    <p class="opacity-80 mb-6 italic">Stuck on a task? Get a 3-step action plan instantly.</p>
                    <div class="space-y-4">
                        <textarea id="aiPrompt" placeholder="What are you struggling with right now?" class="w-full p-4 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-secondary min-h-[100px]"></textarea>
                        <button onclick="generateStrategy()" id="generateBtn" class="bg-secondary hover:bg-amber-500 text-dark font-bold py-3 px-8 rounded-xl transition-all shadow-lg btn-interact">
                            Get Strategy âœ¨
                        </button>
                    </div>
                </div>
                <div id="aiResponseContainer" class="hidden">
                    <div class="bg-white text-slate-800 p-6 rounded-2xl shadow-inner min-h-[220px]">
                        <h3 class="font-bold text-primary mb-3 flex items-center gap-2">ðŸš€ Your Action Plan</h3>
                        <div id="aiResponseText" class="text-sm space-y-4"></div>
                    </div>
                </div>
                <div id="aiLoading" class="hidden flex flex-col gap-4">
                    <div class="h-6 w-3/4 shimmer rounded"></div>
                    <div class="h-20 w-full shimmer rounded"></div>
                    <div class="h-6 w-1/2 shimmer rounded"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto p-4 md:p-8 grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12">

        <!-- CAUSES SECTION -->
        <section class="col-span-1 md:col-span-2">
            <div class="bg-white rounded-2xl shadow-md p-6 md:p-8 border-t-4 border-primary">
                <div class="flex flex-col md:flex-row justify-between items-start mb-6">
                    <div>
                        <h2 class="text-3xl font-bold text-dark">1. Origins & Biology</h2>
                        <p class="text-gray-500 text-sm italic">ADHD is a neurobiological condition, not a choice.</p>
                    </div>
                    <button onclick="explainTopic('Neurotransmitters & Dopamine')" class="mt-4 md:mt-0 text-xs font-bold text-primary border-2 border-primary/20 px-4 py-2 rounded-full hover:bg-primary hover:text-white transition-all btn-interact">
                        Explain Science âœ¨
                    </button>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div>
                        <div class="chart-container">
                            <canvas id="heritabilityChart"></canvas>
                        </div>
                    </div>
                    <div class="space-y-4">
                        <div class="bg-indigo-50 p-5 rounded-2xl border-l-4 border-primary">
                            <h3 class="font-bold text-primary">The Dopamine Gap</h3>
                            <p class="text-sm text-slate-600 mt-1">ADHD brains often lack efficient dopamine processing, leading to a constant search for stimulation or "interest-based" motivation.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- EMOTIONS SECTION -->
        <section class="col-span-1 bg-white rounded-2xl shadow-md p-6 border-t-4 border-danger card-hover">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold text-dark">2. Emotional Peaks</h2>
                <button onclick="explainTopic('Rejection Sensitivity')" class="text-xs font-bold text-danger border-2 border-danger/20 px-3 py-1.5 rounded-full hover:bg-danger hover:text-white transition-all btn-interact">
                    Explain RSD âœ¨
                </button>
            </div>
            <div class="chart-container">
                <canvas id="emotionLineChart"></canvas>
            </div>
            <p class="text-xs text-slate-500 mt-4 text-center italic">Visualization of intensity over time after a perceived rejection.</p>
        </section>

        <!-- SYMPTOMS SECTION -->
        <section class="col-span-1 bg-white rounded-2xl shadow-md p-6 border-t-4 border-secondary card-hover">
            <h2 class="text-2xl font-bold text-dark mb-4">3. Executive Function</h2>
            <div class="chart-container">
                <canvas id="symptomRadarChart"></canvas>
            </div>
            <p class="text-xs text-slate-500 mt-4 text-center italic">Comparison of ADHD vs. Neurotypical executive domain strengths.</p>
        </section>

        <!-- RESOURCE LIBRARY (FIXED LINKS) -->
        <section class="col-span-1 md:col-span-2">
            <div class="bg-slate-900 text-white rounded-3xl p-8 shadow-xl">
                <h2 class="text-3xl font-bold mb-6 flex items-center gap-3">
                    ðŸ“š Reference Library
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <a href="https://www.amazon.com/ADHD-2-0-Essential-Strategies-Distraction/dp/0399178732" target="_blank" class="block p-6 bg-white/5 border border-white/10 rounded-2xl hover:bg-white/10 transition-all group">
                        <h3 class="font-bold text-secondary group-hover:text-amber-400">ADHD 2.0</h3>
                        <p class="text-xs opacity-70 mt-1">By Hallowell & Ratey. Essential strategies for the modern world.</p>
                        <span class="inline-block mt-4 text-xs font-bold underline">View Book â†’</span>
                    </a>
                    <a href="https://www.howtoadhd.com" target="_blank" class="block p-6 bg-white/5 border border-white/10 rounded-2xl hover:bg-white/10 transition-all group">
                        <h3 class="font-bold text-accent group-hover:text-emerald-400">How to ADHD</h3>
                        <p class="text-xs opacity-70 mt-1">Jessica McCabe's guide to building a life that works for your brain.</p>
                        <span class="inline-block mt-4 text-xs font-bold underline">Visit Website â†’</span>
                    </a>
                    <a href="https://chadd.org" target="_blank" class="block p-6 bg-white/5 border border-white/10 rounded-2xl hover:bg-white/10 transition-all group">
                        <h3 class="font-bold text-primary group-hover:text-indigo-400">CHADD Resources</h3>
                        <p class="text-xs opacity-70 mt-1">Children and Adults with ADHD official resource center.</p>
                        <span class="inline-block mt-4 text-xs font-bold underline">Get Support â†’</span>
                    </a>
                </div>
            </div>
        </section>

    </main>

    <!-- Modal for AI Content -->
    <div id="infoModal" class="fixed inset-0 bg-black/70 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-lg w-full p-8 shadow-2xl animate-in fade-in zoom-in duration-200">
            <div id="modalContent" class="space-y-4">
                <h2 id="modalTitle" class="text-2xl font-bold text-primary"></h2>
                <div id="modalBody" class="text-slate-700 leading-relaxed min-h-[100px]"></div>
                <button onclick="closeModal()" class="w-full bg-slate-100 py-3 rounded-xl font-bold hover:bg-slate-200 transition-all">Close</button>
            </div>
        </div>
    </div>

    <footer class="text-center py-12 opacity-50 text-xs">
        <p>Â© 2025 Neurodivergent Insights â€¢ Created for Educational Purposes</p>
    </footer>

    <script>
        const apiKey = ""; 

        async function callGemini(prompt, systemInstruction) {
            let retries = 0;
            const maxRetries = 5;
            
            while (retries < maxRetries) {
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: prompt }] }],
                            systemInstruction: { parts: [{ text: systemInstruction }] }
                        })
                    });
                    
                    if (!response.ok) throw new Error('API Error');
                    const data = await response.json();
                    return data.candidates?.[0]?.content?.parts?.[0]?.text;
                } catch (err) {
                    retries++;
                    await new Promise(r => setTimeout(r, Math.pow(2, retries) * 1000));
                }
            }
            return "Note: I'm currently unable to connect to the AI service. This might be because the environment hasn't provided the necessary API access yet.";
        }

        async function generateStrategy() {
            const input = document.getElementById('aiPrompt').value;
            if (!input) return;

            const btn = document.getElementById('generateBtn');
            const loading = document.getElementById('aiLoading');
            const container = document.getElementById('aiResponseContainer');
            const textDiv = document.getElementById('aiResponseText');

            btn.disabled = true;
            loading.classList.remove('hidden');
            container.classList.add('hidden');
            
            const system = "You are an ADHD Coach. Provide a supportive 3-step action plan (max 100 words). Use bold text for actions.";
            const result = await callGemini(input, system);

            textDiv.innerHTML = result.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\n/g, '<br>');
            loading.classList.add('hidden');
            container.classList.remove('hidden');
            btn.disabled = false;
        }

        async function explainTopic(topic) {
            document.getElementById('infoModal').classList.remove('hidden');
            document.getElementById('modalTitle').innerText = topic;
            document.getElementById('modalBody').innerHTML = "<div class='shimmer h-24 rounded-lg'></div>";
            
            const system = "Explain this concept simply for an ADHD reader. Max 80 words.";
            const result = await callGemini(`Explain ${topic}`, system);
            
            document.getElementById('modalBody').innerText = result;
        }

        function closeModal() { document.getElementById('infoModal').classList.add('hidden'); }

        // --- CHARTS ---
        window.onload = () => {
            Chart.defaults.font.family = "'Poppins', sans-serif";
            
            new Chart(document.getElementById('heritabilityChart'), {
                type: 'doughnut',
                data: {
                    labels: ['Genetics', 'Environment'],
                    datasets: [{ data: [74, 26], backgroundColor: ['#4F46E5', '#E2E8F0'], borderWidth: 0 }]
                },
                options: { responsive: true, maintainAspectRatio: false, cutout: '70%', plugins: { legend: { position: 'bottom' } } }
            });

            new Chart(document.getElementById('emotionLineChart'), {
                type: 'line',
                data: {
                    labels: ['Trigger', 'Fast Peak', 'Slow Fade'],
                    datasets: [{ label: 'Intensity', data: [1, 10, 2], borderColor: '#F43F5E', tension: 0.4, fill: true, backgroundColor: 'rgba(244, 63, 94, 0.1)' }]
                },
                options: { responsive: true, maintainAspectRatio: false, scales: { y: { display: false } } }
            });

            new Chart(document.getElementById('symptomRadarChart'), {
                type: 'radar',
                data: {
                    labels: ['Memory', 'Inhibition', 'Focus', 'Initation', 'Emotion'],
                    datasets: [
                        { label: 'Neurotypical', data: [8, 8, 8, 8, 8], backgroundColor: 'rgba(200, 200, 200, 0.1)', borderColor: '#ccc' },
                        { label: 'ADHD', data: [4, 3, 2, 3, 3], backgroundColor: 'rgba(245, 158, 11, 0.2)', borderColor: '#F59E0B' }
                    ]
                },
                options: { responsive: true, maintainAspectRatio: false, scales: { r: { ticks: { display: false }, min: 0 } } }
            });
        };
    </script>
</body>
</html>

